(function(t){function e(e){for(var s,o,r=e[0],u=e[1],c=e[2],l=0,f=[];l<r.length;l++)o=r[l],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(t[s]=u[s]);m&&m(e);while(f.length)f.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],s=!0,o=1;o<n.length;o++){var u=n[o];0!==a[u]&&(s=!1)}s&&(i.splice(e--,1),t=r(r.s=n[0]))}return t}var s={},a={app:0},i=[];function o(t){return r.p+"js/"+({}[t]||t)+"."+{"chunk-2d0e95df":"f0355f6a"}[t]+".js"}function r(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(t){var e=[],n=a[t];if(0!==n)if(n)e.push(n[2]);else{var s=new Promise((function(e,s){n=a[t]=[e,s]}));e.push(n[2]=s);var i,u=document.createElement("script");u.charset="utf-8",u.timeout=120,r.nc&&u.setAttribute("nonce",r.nc),u.src=o(t);var c=new Error;i=function(e){u.onerror=u.onload=null,clearTimeout(l);var n=a[t];if(0!==n){if(n){var s=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",c.name="ChunkLoadError",c.type=s,c.request=i,n[1](c)}a[t]=void 0}};var l=setTimeout((function(){i({type:"timeout",target:u})}),12e4);u.onerror=u.onload=i,document.head.appendChild(u)}return Promise.all(e)},r.m=t,r.c=s,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=e,u=u.slice();for(var l=0;l<u.length;l++)e(u[l]);var m=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"09a8":function(t,e,n){},"168c":function(t,e,n){"use strict";n("09a8")},"1dc6":function(t,e,n){},"44b6":function(t,e,n){},"4f5a":function(t,e,n){"use strict";n("f04e")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"main"}},[n("router-view")],1)},i=[],o={},r=o,u=(n("5c0b"),n("2877")),c=Object(u["a"])(r,a,i,!1,null,null,null),l=c.exports,m=n("5530"),f=n("8c4f"),p=n("2f62"),d=n("2909"),h=n("53ca"),b=(n("99af"),n("d3b7"),n("3ca3"),n("ddb0"),n("b0c0"),n("bc3a")),_=n.n(b),v={baseURL:"http://47.104.88.119:6001/",timeout:2500},g=_.a.create(v);g.defaults.headers.common["Authorization"]="AUTH_TOKEN",g.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",g.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),g.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)}));var E=g,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("layout",[t.isMain?n("router-view",{staticClass:"height-abs"}):n("div",{staticClass:"app-view-box",attrs:{id:"subapp-viewport"}})],1)},T=[],S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",{staticStyle:{height:"100%"}},[n("el-aside",{staticStyle:{"text-align":"left"},attrs:{width:"240px"}},[n("side-menu")],1),n("el-container",[n("el-header",[n("nav-menu")],1),n("tabs"),n("el-main",[t._t("default")],2)],1)],1)},A=[],U=(n("4de4"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex-row border-bottom",staticStyle:{padding:"0px 20px",height:"60px"}},[n("el-menu",{staticClass:"flex-1 none-border",attrs:{"default-active":t.currentModuleName,mode:"horizontal"}},[n("el-menu-item",{attrs:{index:"home"},on:{click:t.toHome}},[n("i",{staticClass:"el-icon-menu"}),n("span",{attrs:{slot:"title"},slot:"title"},[t._v("首页")])]),t._l(t.menuList,(function(e,s){return n("el-menu-item",{key:s+"menus",attrs:{index:e.moduleName},on:{click:function(n){return t.handleSelect(e)}}},[n("i",{staticClass:"el-icon-menu"}),n("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.moduleTitle))])])}))],2),n("div",{staticClass:"flex-row flex-items-center"},[n("div",{staticStyle:{"padding-right":"20px"}},[t._v("全局数据："+t._s(t.userName))]),n("div",{staticClass:"menu-icons"},[t._m(0),t._m(1),n("span",{staticClass:"menu-icon"},[n("el-badge",{staticClass:"item",attrs:{"is-dot":""}},[n("i",{staticClass:"el-icon-bell icon"})])],1)]),n("div",{staticClass:"cursor-pointer",staticStyle:{height:"60px"}},[t.isScresnFull?n("span",{staticClass:"qiankun-font iconscreen-exit",on:{click:function(e){return t.screenfullClick()}}}):n("span",{staticClass:"qiankun-font iconscreen-full",on:{click:function(e){return t.screenfullClick()}}})]),n("el-dropdown",{on:{command:t.handleCommand}},[n("div",{staticClass:"flex-row flex-items-center cursor-pointer"},[n("el-avatar",{staticClass:"border",attrs:{src:t.avatarImg}})],1),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"setting"}},[t._v("修改用户名")]),n("el-dropdown-item",{attrs:{command:"logout"}},[t._v("跳转登录页")])],1)],1)],1)],1)}),P=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"menu-icon"},[n("i",{staticClass:"el-icon-search icon"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"menu-icon"},[n("i",{staticClass:"el-icon-message icon"})])}],O=n("93bf"),y=n.n(O),C={data:function(){return{avatarImg:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png",isScresnFull:!1}},computed:Object(m["a"])({},Object(p["b"])({currentModuleName:function(t){return t.permission.currentModuleName},userName:function(t){return t.user.userInfo.name},menuList:function(t){return t.permission.menuList},tabsList:function(t){return t.tabs.tabsList}})),methods:{toHome:function(){var t={title:"首页",moduleName:"Home",path:"/home",meta:{isTabs:!1,isSide:!1,moduleName:"main",title:"首页"}};this.$store.commit("tabs/UPDATE_TABS_LIST",t),this.$actions.setGlobalState({tabsList:this.tabsList}),this.$router.push("/home")},handleSelect:function(t){var e=this.menuList.filter((function(e){return e.moduleName===t.moduleName}));this.$store.commit("permission/UPDATE_SUB_MENU",e[0].menuList)},handleCommand:function(t){return"logout"===t?(this.$router.push({path:"/login"}),!1):"setting"===t?(this.$store.commit("user/UPDATE_USER_INFO_ITEM",{key:"userInfo",value:{name:"zhangsan"}}),this.$actions.setGlobalState({userInfo:{name:"zhangsan"}}),!1):void 0},screenfullClick:function(){y.a.isEnabled&&(y.a.toggle(),this.isScresnFull=!this.isScresnFull)}}},N=C,x=(n("8176"),Object(u["a"])(N,U,P,!1,null,"657389c2",null)),M=x.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"side-bar"},[t._m(0),n("el-menu",{staticClass:"side-menu",attrs:{"default-active":t.currentPage,"background-color":"#00142a","text-color":"hsla(0, 0%, 100%, .65)","active-text-color":"#409EFF"},on:{open:t.handleOpen,close:t.handleClose}},[t._l(t.subMenu,(function(e){return["notfound"!==e.name?n("el-menu-item",{key:e.name,attrs:{index:e.path},on:{click:function(n){return t.handleSelect(e)}}},[n("i",{staticClass:"el-icon-menu"}),n("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.title))])]):t._e()]}))],2)],1)},I=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"logo"},[n("span",{staticClass:"site-name"},[t._v("ADMIN LITE")])])}],w={computed:Object(m["a"])({},Object(p["b"])({subMenu:function(t){return t.permission.subMenu},currentPage:function(t){return t.permission.currentPage},tabsList:function(t){return t.tabs.tabsList}})),methods:{handleSelect:function(t){this.$store.commit("tabs/UPDATE_TABS_LIST",t),this.$actions.setGlobalState({tabsList:this.tabsList}),this.$router.push(t.path)},handleOpen:function(t,e){console.log(t,e)},handleClose:function(t,e){console.log(t,e)}}},j=w,D=(n("4f5a"),Object(u["a"])(j,$,I,!1,null,"162514fb",null)),k=D.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tabs-box flex-row flex-items-center"},t._l(t.tabsList,(function(e){return n("div",{key:e.name,staticClass:"tabs-item paas-flex-cc",class:e.path===t.currentPage?"tabs-item-hover":"null"},[n("span",[n("span",{staticClass:"cursor-pointer fs-14 tabs-item-text",on:{click:function(n){return t.handleClick(e)}}},[t._v(t._s(e.title))]),n("i",{staticClass:"el-icon-close tabs-remove-icon cursor-pointer",on:{click:function(n){return t.removeTab(e)}}})])])})),0)},B=[],G={computed:Object(m["a"])({},Object(p["b"])({menuList:function(t){return t.permission.menuList},currentPage:function(t){return t.permission.currentPage},tabsList:function(t){return t.tabs.tabsList}})),methods:{getArrayIndex:function(t,e){for(var n=0;n<t.length;n++){var s=t[n];if(s.name===e)return n}return-1},handleClick:function(t){if(this.currentPage===t.path)return!1;if("/home"!==t.path){var e=this.menuList.filter((function(e){return e.moduleName===t.meta.moduleName}));this.$store.commit("permission/UPDATE_SUB_MENU",e[0].menuList),this.$router.push({path:t.path})}else this.$store.commit("permission/UPDATE_SUB_MENU",!0),this.$router.push({path:t.path})},removeTab:function(t){var e=this.tabsList.length-1,n=this.getArrayIndex(this.tabsList,t.name);e===n?this.$store.dispatch("tabs/REMOVE_LAST_TAB",t):this.$store.dispatch("tabs/REMOVE_ANY_TAB",{indexOf:n,tabsItem:t})}}},F=G,q=(n("9c81"),Object(u["a"])(F,R,B,!1,null,"e6f8f288",null)),H=q.exports,z={name:"Layout",components:{SideMenu:k,NavMenu:M,Tabs:H},computed:Object(m["a"])({},Object(p["b"])({menuList:function(t){return t.permission.menuList},tabsList:function(t){return t.tabs.tabsList}})),mounted:function(){this.$actions.setGlobalState({userInfo:this.$store.state.user.userInfo,globalConfig:this.$store.state.user.globalConfig,routers:this.$store.state.permission.routers});var t=sessionStorage.getItem("currentPage"),e=sessionStorage.getItem("currentApp"),n={title:"首页",moduleName:"Home",path:"/home",meta:{isTabs:!1,isSide:!1,moduleName:"main",title:"首页"}};if(t&&"/home"===t&&e&&"main"===e)return this.$store.commit("permission/UPDATE_SUB_MENU",!0),this.$store.commit("tabs/UPDATE_TABS_LIST",n),this.$actions.setGlobalState({tabsList:this.tabsList}),!1;if(t&&e){var s=this.menuList.filter((function(t){return t.moduleName===e}));this.$store.commit("permission/UPDATE_SUB_MENU",s[0].menuList);var a=s[0].menuList.filter((function(e){return e.path===t}));this.$store.commit("tabs/UPDATE_TABS_LIST",a[0])}else this.$store.commit("permission/UPDATE_SUB_MENU",!0),this.$store.commit("tabs/UPDATE_TABS_LIST",n);this.$actions.setGlobalState({tabsList:this.tabsList})}},V=z,J=(n("168c"),Object(u["a"])(V,S,A,!1,null,"02e98046",null)),Y=J.exports,K=n("34ac9"),Q=(n("159b"),n("e223")),W={userInfo:null,globalConfig:null,routers:null,tabsList:[]},X=Object(Q["b"])(W);X.onGlobalStateChange((function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var n=t[e];W[e]=n,"userInfo"===e&&dt.commit("user/UPDATE_USER_INFO",n),"globalConfig"===e&&dt.commit("user/UPDATE_GLOBAL_CONFIG",n),"routers"===e&&dt.commit("permission/UPDATE_ROUTERS",n),"tabsList"===e&&dt.commit("tabs/SET_TABS_LIST",n)}}));var Z=[{name:"sub01",entry:"http://localhost:8010/sub01"},{name:"sub02",entry:"http://localhost:8020/sub02"}],tt=function(){return Z.forEach((function(t){t.container="#subapp-viewport",t.activeRule="/".concat(t.name),t.props={routerBase:t.activeRule,globalState:W}})),Z},et={beforeLoad:[function(t){console.log("%c before load","background:#0f0 ; padding: 1px; border-radius: 3px;  color: #fff",t)}],beforeMount:[function(t){console.log("%c before mount","background:#f1f ; padding: 1px; border-radius: 3px;  color: #fff",t)}],afterUnmount:[function(t){console.log("%c after unload","background:#a7a ; padding: 1px; border-radius: 3px;  color: #fff",t)}]},nt=function(){var t=tt();Object(K["b"])(t,et),Object(K["c"])({prefetch:"all",sandbox:!0,singular:!0})},st={data:function(){return{isMain:!1}},components:{Layout:Y},watch:{$route:function(t){this.isMainPage(t)}},mounted:function(){this.isMainPage(this.$route),window.qiankunStarted||(window.qiankunStarted=!0,nt())},methods:{isMainPage:function(t){"main"===t.meta.moduleName?this.isMain=!0:this.isMain=!1}}},at=st,it=Object(u["a"])(at,L,T,!1,null,null,null),ot=it.exports,rt={namespaced:!0,state:function(){return{routers:null,menuList:[],subMenu:[],currentModuleName:"home",currentPage:null}},mutations:{UPDATE_CURRENT_MODULE_NAME:function(t,e){sessionStorage.setItem("currentApp",e),t.currentModuleName=e},UPDATE_CURRENT_PAGE:function(t,e){sessionStorage.setItem("currentPage",e),t.currentPage=e},UPDATE_MENU_LIST:function(t,e){t.menuList=e},UPDATE_SUB_MENU:function(t,e){t.subMenu=[];var n={title:"首页",moduleName:"Home",path:"/home",meta:{isTabs:!1,isSide:!1,moduleName:"main",title:"首页"}};"boolean"!==typeof e?"object"===Object(h["a"])(e)&&(t.subMenu=e):t.subMenu.push(n)},UPDATE_ROUTERS:function(t,e){t.routers=yt.concat(e)}},actions:{generateRoutes:function(t){var e=t.commit;return new Promise((function(t){E.get("/menus").then((function(s){var a=s.data.data.list;e("UPDATE_MENU_LIST",a);for(var i=[],o=0;o<a.length;o++){var r=a[o],u=ut(r.menuList);i=[].concat(Object(d["a"])(i),Object(d["a"])(u))}i.push({path:"*",name:"notfound",component:function(){return n.e("chunk-2d0e95df").then(n.bind(null,"8cdb"))}}),e("UPDATE_ROUTERS",i),t(i)}))}))}},getters:{}};function ut(t){for(var e=[],n=0;n<t.length;n++){var s=t[n],a={path:s.path,component:ot,name:s.name,meta:s.meta};a.meta.title=s.title,a.meta.moduleName=s.moduleName,e.push(a)}return e}var ct=rt,lt=(n("a434"),{namespaced:!0,state:function(){return{tabsList:[]}},mutations:{SET_TABS_LIST:function(t,e){t.tabsList=e},UPDATE_TABS_LIST:function(t,e){if(t.tabsList.length<10){var n=t.tabsList.filter((function(t){return t.name===e.name}));n.length||t.tabsList.push(e),Mt.push({path:e.path})}}},actions:{REMOVE_LAST_TAB:function(t,e){var n=t.state;if(n.tabsList.length>1){n.tabsList.forEach((function(t,s){t.name===e.name&&n.tabsList.splice(s,1)}));var s=n.tabsList.length-1,a=n.tabsList[s];Mt.push({path:a.path})}},REMOVE_ANY_TAB:function(t,e){var n=t.state,s=e.tabsItem,a=e.indexOf,i=n.tabsList.length;if(n.tabsList.length>1&&a<i){var o=sessionStorage.getItem("currentPage");if(e.tabsItem.path===o){n.tabsList.forEach((function(t,e){t.name===s.name&&n.tabsList.splice(e,1)}));var r=n.tabsList[a];Mt.push({path:r.path})}else n.tabsList.forEach((function(t,e){t.name===s.name&&n.tabsList.splice(e,1)}));this.$actions.setGlobalState({tabsList:this.tabsList})}}}}),mt=lt,ft={namespaced:!0,state:function(){return{userInfo:{name:"qiankun"},globalConfig:{formSize:"small"}}},mutations:{UPDATE_USER_INFO_ITEM:function(t,e){t[e.key]=e.value},UPDATE_GLOBAL_CONFIG_ITEM:function(t,e){t[e.key]=e.value},UPDATE_USER_INFO:function(t,e){t.userInfo=e},UPDATE_GLOBAL_CONFIG:function(t,e){t.globalConfig=e}},actions:{}},pt=ft;s["default"].use(p["a"]);var dt=new p["a"].Store({modules:{permission:ct,tabs:mt,user:pt}}),ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("h1",[t._v("main登录页面")]),n("el-button",{attrs:{type:"primary"},on:{click:t.toHome}},[t._v("登录")])],1)},bt=[],_t={name:"Login",mounted:function(){sessionStorage.removeItem("currentApp"),sessionStorage.removeItem("currentPage"),this.$actions.setGlobalState({userInfo:{name:"lizhijie429"}})},methods:{toHome:function(){this.$router.push("/home")}}},vt=_t,gt=Object(u["a"])(vt,ht,bt,!1,null,null,null),Et=gt.exports,Lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"about"},[t._v("主应用首页")])},Tt=[],St={},At=Object(u["a"])(St,Lt,Tt,!1,null,null,null),Ut=At.exports,Pt=n("323e"),Ot=n.n(Pt);n("a5d8");s["default"].use(f["a"]);var yt=[{path:"/login",name:"login",component:Et,meta:{isTabs:!1,isSide:!1,moduleName:"main",title:"登录"}},{path:"/",name:"Layout",component:ot,redirect:"/home",children:[{path:"/home",name:"Home",component:Ut,meta:{isTabs:!1,isSide:!1,moduleName:"main",title:"首页"}}]}],Ct=function(){return new f["a"]({mode:"history",routes:yt,isAddAsyncMenuData:!1})},Nt=f["a"].prototype.push;f["a"].prototype.push=function(t){return Nt.call(this,t).catch((function(t){return t}))};var xt=Ct();xt.beforeEach((function(t,e,n){Ot.a.start(),"/login"!==t.path&&(dt.commit("permission/UPDATE_CURRENT_MODULE_NAME",t.meta.moduleName),dt.commit("permission/UPDATE_CURRENT_PAGE",t.path)),"/home"===t.path&&dt.commit("permission/UPDATE_SUB_MENU",!0),xt.options.isAddAsyncMenuData?n():dt.dispatch("permission/generateRoutes").then((function(e){for(var s=0,a=e.length;s<a;s+=1){var i=e[s];xt.addRoute(i)}xt.options.isAddAsyncMenuData=!0,n(Object(m["a"])(Object(m["a"])({},t),{},{replace:!0}))}))})),xt.afterEach((function(){Ot.a.done()}));var Mt=xt,$t=(n("30a6"),n("c41d"),n("5c96")),It=n.n($t),wt=(n("0fae"),n("f90c")),jt=n.n(wt),Dt=n("4328");s["default"].use(It.a,{size:"small"}),s["default"].prototype.$validator=jt.a,s["default"].prototype.$http=E,s["default"].prototype.$qsParse=Dt["parse"],s["default"].prototype.$qsStringify=Dt["stringify"],s["default"].config.productionTip=!1,s["default"].prototype.$actions=X,new s["default"]({router:Mt,store:dt,render:function(t){return t(l)}}).$mount("#main")},"5c0b":function(t,e,n){"use strict";n("9c0c")},8176:function(t,e,n){"use strict";n("44b6")},"9c0c":function(t,e,n){},"9c81":function(t,e,n){"use strict";n("1dc6")},f04e:function(t,e,n){}});
//# sourceMappingURL=app.8fa7f379.js.map